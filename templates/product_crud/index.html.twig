{% extends 'navbar.html.twig' %}

{% block body %}

    <title>{% block title %}List of products{% endblock %}</title>

    {# Show success messages #}
    {% for flashMessage in app.flashes('success') %}
        <div class="alert alert-success">
            {{ flashMessage }}
        </div>
    {% endfor %}

    {# Show error messages #}
    {% for flashMessage in app.flashes('danger') %}
        <div class="alert alert-danger">
            {{ flashMessage }}
        </div>
    {% endfor %}

    <div class="container-fluid">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title"> <i class="fa fa-list" aria-hidden="true"></i> List of products</h2>
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="tablaPacientes">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Sku</th>
                                <th>Product_name</th>
                                <th>Description</th>
                                <th>created_at</th>
                                <th>updated_at</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for product in products %}
                                <tr>
                                    <td>{{ product.id }}</td>
                                    <td>{{ product.sku }}</td>
                                    <td>{{ product.productName }}</td>
                                    <td>{{ product.description }}</td>
                                    <td>{{ product.createdAt ? product.createdAt|date('Y-m-d H:i:s') : '' }}</td>
                                    <td>{{ product.updateAt ? product.updateAt|date('Y-m-d H:i:s') : '' }}</td>
                                    <td>
                                        <a class="btn btn-primary" href="{{ path('app_product_show', {'Sku': product.Sku}) }}" class="btn btn-info">Show </a>
                                        <a class="btn btn-primary" href="{{ path('app_product_edit', {'Sku': product.Sku}) }}" class="btn btn-warning">Edit</a>
                                        {{ include('product_crud/_delete_form.html.twig') }} 

                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="7" style="border-top: 1px solid #ddd;"></td>
                                </tr>
                            {% else %}
                                <tr>
                                    <td colspan="7">Records not found.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <a href="{{ path('app_product_new') }}" class="btn btn-success">Create a new product</a>
    </div>
{% endblock %}
